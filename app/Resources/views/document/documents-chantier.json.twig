{% import 'tools.html.twig' as tools %}

[{% for folder in chantier.dossiers -%}
    {{ { "id" : "folder-" ~ folder.id, "parent" : "#", "type": "folder", "text" : folder.nom|e }|json_encode|raw }}
    {# use "value" instead of "id" key, if you use jquery-ui #}
    {%- if not loop.last %},{% endif -%}
    {% endfor %}
    {% for doc in chantier.documents -%}
    {%- if loop.first %},{% endif -%}
    {{ { "id" : "file-" ~ doc.id, "parent" : "#", "type": "file", "text" : doc.nom|e, "icon": asset('img/file-icons/small/') ~ tools.file_icon(doc.mimeType)|trim }|json_encode|raw }}
    {# use "value" instead of "id" key, if you use jquery-ui #}
    {%- if not loop.last %},{% endif -%}
    {% endfor %}]
